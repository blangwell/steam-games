<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="//cdn.jsdelivr.net/npm/phaser@3.24.0/dist/phaser.min.js"></script>
  <link rel="stylesheet" href="assets/style.css">
  <title>Math Cannon</title>
</head>

<body>
  <h1 id="title">Math Cannon</h1>
  <script>
    
    // bind scene to new Scene instance object
  const scene = new Phaser.Scene('game');

  const config = {
    width: 800,
    height: 600,
    type: Phaser.AUTO,
    // physics: {
    //   default: 'arcade',
    //   arcade: {
    //     fps: 60,
    //     gravity: {y : 0},
    //   }
    // },
    scene: scene
  };


  const game = new Phaser.Game(config);

  // now we create scene functions which run at certain intervals
  // we are EXTENDING our scene objects via functions (function expression syntax)
  
  
  // init => sets up vars like lives, health, ammo, etc
  scene.init = function() {
    this.score = 0;
    this.lives = 3;
    this.scoreText;
    
  }
  
  // preload => preloads assets into the game prior to render
  scene.preload = function() {
    this.load.image('background', 'assets/space-bg.jpg')
    this.load.image('crosshair', 'assets/crossair_blueOutline.png')
  }

  
  // create => loaded once preload has finished, position character, add text etc
  let ch;
  
  scene.create = function() {
    let bg = this.add.sprite(0, 0, 'background');
    bg.setOrigin(0, 0);

    
    ch = this.add.sprite(this.sys.game.config.width/2, this.sys.game.config.height/2, 'crosshair')
    
    // this.input.setDefaultCursor('url(/assets/crosshair_blueOutline.cur), pointer');
    // this.sys.canvas.style.cursor = 'crosshair';

    // add.text(x, y, 'text', {styling object props})
    this.scoreText = this.add.text(16, 16, 'score : '+ this.score, {fontSize: '20px', fill: '#fff'})
    this.liveText = this.add.text(16, this.sys.game.config.height-50, 'Lives : ' + this.lives, {fontSize: '20px', fill: '#fff'})

  }
  
  
  // update => core function of the game, runs 60x/second used for interaction
  let cursors;

  scene.update = function() {
    cursors = this.input.keyboard.createCursorKeys();

    if (cursors.left.isDown) {
      ch.x -= 10;
    } else if (cursors.right.isDown) {
      ch.x += 10;
    } else if (cursors.up.isDown) {
      ch.y -= 10;
    } else if (cursors.down.isDown) {
      ch.y += 10;
    }
    
  }
  
  // end => called once the game is over, ie out of lives, end of level
  scene.end = function() {

  }

  </script>
</body>
</html>

